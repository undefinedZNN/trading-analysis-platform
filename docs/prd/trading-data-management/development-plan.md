# 交易数据管理开发节奏建议

## 文档目的
指导团队分阶段推进交易数据管理模块的研发，同时作为后续迭代验收与复盘的依据。本计划可与迭代规划或看板同步维护。

## 推荐存放位置
- 本文档位于 `docs/prd/trading-data-management/`，便于与 PRD、API 草案、交互稿同目录管理。
- 若团队使用项目管理工具（如 Jira、Notion），可链接此文档并保持内容同步。

## 阶段划分

### Milestone 0：准备阶段（~1 周）
- 明确开放问题：错误日志展示形式、重试策略、文件存储方案。
- 输出手绘交互稿（存放于 `design-interactions/`），确认关键页面布局。
- 完成 API 草案审阅，锁定字段与响应格式。
- 搭建数据库迁移基础设施（NestJS TypeORM）。

### Milestone 1：MVP 实现（~2-3 周）
- 后端：
  - 实现 `datasets`、`imports` 实体与迁移，包含软删除与错误日志字段。
  - 完成导入流程（上传、异步清洗、状态更新、错误日志记录）。
  - 提供列表查询、状态查询、重试接口。
- 前端：
  - 搭建交易数据管理列表页，包含筛选、分页、状态展示。
  - 实现导入表单、上传流程与进度轮询。
  - 支持错误日志查看、重新导入，以及标签多选输入。
- 测试：
  - 覆盖导入成功、上传失败、清洗失败重试的端到端用例。

### Milestone 2：增强与稳定（~2 周）
- 增加导入任务详情页、错误日志下载。
- 支持列表“显示已删除”并实现恢复操作。
- 提升监控与告警（导入超时、失败提醒）。
- 前后端分别补充集成测试、E2E 测试。

### Milestone 3：扩展规划（待定）
- 规划权限管理、批量导入、自动化调度等高级功能。
- 评估将手绘交互稿升级为高保真设计的需求。

## 节奏建议
- 每个 Milestone 结束前召开评审，确认交付物与待办。
- 采用看板跟踪任务，优先解决跨职能问题（如后端接口变更）。
- 保持文档同步更新，尤其是 PRD、API Spec 与数据库结构。

## 依赖与协调事项
- 数据基础设施：确认 DuckDB/Parquet 存储路径与访问权限。
- 插件团队：确保清洗插件符合标准接口，支持重试。
- DevOps：准备日志采集与监控指标方案。

## 交付清单
- 更新的 PRD、交互稿、API 文档。
- 后端服务（含迁移脚本、单元测试、Swagger）。
- 前端界面与交互逻辑。
- 导入流程的试运行报告（含性能指标、异常情况）。
